!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],r);else{var t="object"==typeof exports?r(require("jquery")):r(e.$);for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(window,(function(e){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";(function(e){Object.defineProperty(r,"__esModule",{value:!0});var n,a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),o=t(2),i=(n=o)&&n.__esModule?n:{default:n};var l=new(function(){function r(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),this.debug=!1,this.option={},this.parseRuleData={radio:function(r){for(var t=e(r),n=0;n<t.length;n++){var a=t[n];if(a.checked)return a.value||n}return null},checkbox:function(r){var t=e(r)[0];return!!t.checked||null}},this.rules={required:{rule:"require"},maxlength:{rule:"max"},minlength:{rule:"min"},mobile:{rule:"mobile"},lt:{rule:"lt"},gt:{rule:"gt"},idcard:{rule:"idcard"},notin:{rule:"notIn"},in:{rule:"in"},integer:{rule:"integer"},number:{rule:"number"}}}return a(r,[{key:"setOption",value:function(e){this.option=e}},{key:"parseRule",value:function(r,t){if("radio"==(r=e(r)[0]).type)return{error:"radio需要使用父容器验证",errorType:"radio",el:r};if("checkbox"==r.type)return{error:"checkbox需要使用父容器验证",errorType:"checkbox",el:r};var n=r.getAttributeNames(),a=(Object.keys(this.rules),e(r).attr("name")),o=e(r).attr("name-show"),i=e(r).val(),l=t||r,u=e(l).attr("type");if(t&&(a=e(t).attr("name"),i=e(t).val()),this.parseRuleData[u]&&(i=this.parseRuleData[u](l),console.log(u,i,a)),!a)return{error:"未获取到name",errorType:"noname",el:r,valSelecter:t};for(var s={},f={},c=0;c<n.length;c++)if(this.rules[n[c]]){var v=this.rules[n[c]],d=e(r).attr(n[c]);s[v.rule]=d,f[n[c]]={attrName:n[c],ruleName:v.rule,rule:d}}var g=[];for(var p in f){var h=f[p].rule&&f[p].rule!=f[p].attrName?":"+f[p].rule:"";g.push(""+f[p].ruleName+h)}return{error:!1,el:r,name:a,elNameShow:o,val:i,rule:g.join("|"),ruleObj:s,ruleParseData:f}}},{key:"registerValidate",value:function(r,t,n){var a=this;t=t||"change",e(r).on(t,(function(){console.log("验证",t);var e=[r],n=l.parseValidateElItem(e),o=n.validateRules,u=(n.validateFieldsEl,n.data),s=new i.default(o);if(a.option.removeAction?a.option.removeError(r):a.removeError(r),!s.check(u,!0)){var f=s.getError();a.option.showError?a.option.showError(r,f):a.showError(r,f)}}))}},{key:"isContainerEl",value:function(e){for(var r=["div"],t=0;t<r.length;t++){var n=r[t];if(n.tagName==n)return!0}return!1}},{key:"showError",value:function(r,t){r.validateError=!0,e(r).addClass(this.option.errorClass),e(r).after('<div class="validate-err-msg"><div class="validate-err-msg-content">'+t+"</div></div>")}},{key:"removeError",value:function(r){(console.log("移除错误消息",r),e(r).removeClass(this.option.errorClass),1==r.validateError)&&e(r).next().remove()}},{key:"removeAllError",value:function(r){e(r).find(this.option.errorClass).removeClass(this.option.errorClass),e(".validate-err-msg").remove()}},{key:"parseValidateElItem",value:function(r){for(var t=[],n=0;n<r.length;n++){var a=r[n],o=e(a).attr("validate-field")||!1,i=this.parseRule(a,o);i.error?this.debug&&console.log("rule error",i):t.push(i)}for(var l={},u={},s={},f=0;f<t.length;f++){var c=t[f],v=c.elNameShow?"|"+c.elNameShow:"";l[c.name+v]=c.rule,s[c.name]=c.val,u[c.name]=c.el}return{validateRules:l,validateFieldsEl:u,data:s}}}]),r}());e.fn.validateForm=function(r){r={validateClass:(r=r||{}).validateClass||"validate-field",errorClass:r.errorClass||"validate-err",debug:r.debug},l.debug=r.debug,l.setOption(r),l.removeAllError(this);var t=e("."+r.validateClass+",input,select"),n=l.parseValidateElItem(t),a=n.validateRules,o=n.validateFieldsEl,u=n.data,s=new i.default(a);if(!s.check(u,!0))for(var f=s.getErrors(),c=0;c<f.length;c++){var v=f[c],d=e(o[v.field]).attr("errormsg")||v.msg;r.showError?r.showError(o[v.field],d):l.showError(o[v.field],d),l.registerValidate(o[v.field],"blur",r.removeError)}},r.default=l}).call(this,t(1))},function(r,t){r.exports=e},function(e,r,t){"use strict";var n=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();var a=function(){function e(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.rule=r,this.messageRuleSetting=t||{},this.errorMsg="error",this.errorMsgs=[],this.debug=!1,this.validateRules={email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,number:/^-?\d*\.?\d+$/,chinese:/^[\u4e00-\u9fa5]+$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,mobile:/^[1][3-9][0-9]{9}$/,require:function(e){return!(null==e||""===e)},max:function(e,r){return!((""+e).length>parseInt(r))},min:function(e,r){return!((""+e).length<parseInt(r))},"<":function(){var e;return(e=this.validateRules).lt.apply(e,arguments)},">":function(){var e;return(e=this.validateRules).gt.apply(e,arguments)},"<=":function(){var e;return(e=this.validateRules).elt.apply(e,arguments)},">=":function(){var e;return(e=this.validateRules).egt.apply(e,arguments)},lt:function(e,r){return parseFloat(e)<parseFloat(r)},gt:function(e,r){return parseFloat(e)>parseFloat(r)},elt:function(e,r){return parseFloat(e)<=parseFloat(r)},egt:function(e,r){return parseFloat(e)>=parseFloat(r)},integer:function(e){return!isNaN(e)&&parseInt(e)==parseFloat(e)},in:function(){for(var e=1,r=arguments.length;e<r;e++)if(arguments[0]==arguments[e])return!0;return!1},notIn:function(){for(var e=1,r=arguments.length;e<r;e++)if(arguments[0]==arguments[e])return!1;return!0}},this.message={number:"$0只能是数字",integer:"$0只能填整数",chinese:"$0只能是中文",email:"$0格式不正确",idcard:"$0格式不正确",mobile:"$0格式不正确",require:"$0不能为空",length:"$0长度只能是$1到$2个字符",min:"$0的长度至少$1个",max:"$0的长度不能超过$1个",eq:"$0只能是$1",neq:"$0不能为$1",gt:"$0需要大于$1",">":"$0需要大于$1",lt:"$0需要小于$1","<":"$0需要小于$1",egt:"$0需要大于等于$1",">=":"$0需要大于等于$1",elt:"$0需要小于等于$1","<=":"$0需要小于等于$1",between:"$0值只能在$1到$2之间",in:"$0只能取$n",notIn:"$0不能在$n之间",confirm:"$0与:1不一致"},this.data={}}return n(e,[{key:"rule",value:function(){}},{key:"parse",value:function(e){var r=e.split("|"),t={};for(var n in r){var a=r[n].split(":"),o=a[0],i=a[1]?a[1].split(","):[];t[o]={name:o,args:i}}return t}},{key:"check",value:function(e,r,t){var n=this;this.errorMsgs=[],this.errorMsg="",r=r||!1,t=t||!1,this.data=e;var a=function(){var a=o,u=a,s=n.rule[o],f=a.split("|");f.length>1&&(a=f[0],u=f[1]),i=n.parse(s),n.debug&&console.log("解析规则",i);var c=[],v=function(){c.push("开始验证"+l);var r=i[l].args;if(!n.validateRules.require(e[a])&&!i.require)return c.push("没有填写可以不验证的"),"continue";if(!n.validateRules[l])return console.log("未定义验证规则"+l),c.push("未定义验证规则"+l),"continue";var o="function"==typeof n.validateRules[l]?n.validateRules[l].apply(n,[e[a]].concat(function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(r))):n.validateRules[l].test(e[a]);if(c.push({vArgs:r,data:e[a],validate:l,status:o?"成功":"失败"}),!o){var s=u+"参数错误";if(n.messageRuleSetting[l+"."+a]?s=n.messageRuleSetting[l+"."+a]:n.messageRuleSetting[a]?s=n.messageRuleSetting[a]:n.message[l]&&(s=n.message[l].repl,s=n.message[l].replace(/\$([\din])+/g,(function(e,t){if("$0"==e)return u;if("$n"==e)return r.join(",");var n=e.match(/\$([\dn]+)/),a=parseInt(n[1]);return r[a-1]}))),n.errorMsgs.push({field:a,name:u,rule:l,msg:s,args:r}),!t)return"break"}};e:for(l in i){switch(v()){case"continue":continue;case"break":break e}}if(n.debug&&console.log(c),n.errorMsgs.length&&(n.errorMsg=n.errorMsgs[0].msg,!r))return"break"};for(var o in this.rule){var i,l;if("break"===a())break}return!this.errorMsgs.length}},{key:"getError",value:function(){return this.errorMsg}},{key:"getErrors",value:function(){return this.errorMsgs}},{key:"getErrorField",value:function(){return!!this.errorMsgs.length&&this.errorMsgs[0].field}},{key:"getRules",value:function(e){}}]),e}();e.exports=a}])}));